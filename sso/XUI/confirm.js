require.config({paths:{backbone:"libs/backbone-1.1.2-min",doTimeout:"libs/jquery.ba-dotimeout-1.0-min",form2js:"libs/form2js-2.0",handlebars:"libs/handlebars-1.3.0-min",jquery:"libs/jquery-1.11.1-min",js2form:"libs/js2form-2.0",i18next:"libs/i18next-1.7.3-min",moment:"libs/moment-2.8.1-min",spin:"libs/spin-2.0.1-min",underscore:"libs/lodash-2.4.1-min",xdate:"libs/xdate-0.8-min",ThemeManager:"org/forgerock/openam/ui/common/util/ThemeManager",UserDelegate:"org/forgerock/openam/ui/user/delegates/UserDelegate"},shim:{backbone:{deps:["underscore"],exports:"Backbone"},doTimeout:{deps:["jquery"],exports:"doTimeout"},form2js:{exports:"form2js"},handlebars:{exports:"handlebars"},js2form:{exports:"js2form"},i18next:{deps:["jquery","handlebars"],exports:"i18next"},moment:{exports:"moment"},spin:{exports:"spin"},underscore:{exports:"_"},xdate:{exports:"xdate"}}}),require(["jquery","underscore","backbone","org/forgerock/commons/ui/common/util/Constants","org/forgerock/commons/ui/common/main/ServiceInvoker","org/forgerock/commons/ui/common/util/UIUtils","org/forgerock/commons/ui/common/util/CookieHelper","org/forgerock/openam/ui/common/util/RealmHelper","config/main","org/forgerock/commons/ui/common/main","org/forgerock/commons/ui/user/main","org/forgerock/openam/ui/common/main","org/forgerock/openam/ui/user/main"],function(e,t,n,r,i,s,o,u){var a={defaultHeaders:{}},f,l,c=s.convertCurrentUrlToJSON().params,h=r.host+"/"+r.context+"/json/",p=window.location.search.substring(1);window.$=e,window._=t,window.Backbone=n,f={url:h+u.decorateURIWithRealm("__subrealm__/serverinfo/*"),type:"GET",headers:{"Cache-Control":"no-cache"},success:function(){location.href=s.getCurrentUrlBasePart()+"/"+r.context+"/XUI/#continueRegister/&"+p},error:function(e){l=JSON.parse(e.responseText).message;if(l.indexOf("Invalid realm")>-1){o.cookiesEnabled();var t=new Date,n={realmName:c.realm,valid:!1};t.setDate(t.getDate()+1),o.setCookie("invalidRealm",n,t),location.href=s.getCurrentUrlBasePart()+"/"+r.context+"/XUI/#login"}}},c.username?location.href=s.getCurrentUrlBasePart()+"/"+r.context+"/XUI/#forgotPasswordChange/&"+p:c.realm?(i.configuration=a,i.restCall(f)):c.email?location.href=s.getCurrentUrlBasePart()+"/"+r.context+"/XUI/#continueRegister/&"+p:location.href=s.getCurrentUrlBasePart()+"/"+r.context+"/XUI/#login"})