define("org/forgerock/openam/ui/common/delegates/SiteConfigurationDelegate",["org/forgerock/commons/ui/common/util/Constants","org/forgerock/commons/ui/common/main/AbstractDelegate","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/main/EventManager","org/forgerock/commons/ui/common/util/UIUtils","org/forgerock/openam/ui/common/util/RealmHelper"],function(e,t,n,r,i,s){var o=new t(e.host+"/"+e.context),u,a;return o.getConfiguration=function(e,t){if(!n.globalData.auth.subRealm)try{console.debug("No current SUB REALM was detected. Applying from current URI values...");var r=s.getSubRealm();console.debug("Changing SUB REALM to '"+r+"'"),n.globalData.auth.subRealm=s.getSubRealm(),u=s.getSubRealm(),a=s.getOverrideRealm()}catch(f){console.debug("Unable to applying sub realm from URI values")}o.serviceCall({headers:{"Accept-API-Version":"protocol=1.0,resource=1.1"},url:s.decorateURIWithRealm("/json/__subrealm__/serverinfo/*"),success:function(t){var n=location.hostname,r=t.FQDN,s=i.getUrl();r!==null&&n!==r?location.href=s.replace(n,r):e(t)},error:t})},o.checkForDifferences=function(t,r){if(u!==s.getSubRealm()||a!==s.getOverrideRealm()){var i=s.getSubRealm(),f=s.getOverrideRealm();return i!==u&&(console.debug("Changing SUB REALM from '"+u+"' to '"+i+"'"),n.globalData.auth.subRealm=i,u=i),a=s.getOverrideRealm(),o.serviceCall({type:"GET",headers:{"Accept-API-Version":"protocol=1.0,resource=1.1"},url:s.decorateURIWithRealm("/json/__subrealm__/serverinfo/*"),errorsHandlers:{unauthorized:{status:"401"},"Bad Request":{status:"400",event:e.EVENT_INVALID_REALM}}})}return $.Deferred().resolve()},o})